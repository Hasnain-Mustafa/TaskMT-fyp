generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model User {
  id               String    @id @default(auto()) @map("_id") @db.ObjectId
  name             String
  email            String    @unique
  password         String
  isManager        Boolean
  salt             String
  assignedProjects Project[] @relation(fields: [assignedProjectIds], name: "Assignee",references: [id])
  assignedProjectIds       String[]  @db.ObjectId
  createdProjects  Project[] @relation(name: "Creator")
assignedTasks Task[] @relation(name: "Assignee")

  @@map("users")
}

model Project {
  id          String   @id @default(auto()) @map("_id") @db.ObjectId
  title       String
  status      String
  summary     String
  weeks       String
  budget      String
  assignees   User[]   @relation(fields: [assigneeIds], name: "Assignee",references: [id])
  assigneeIds String[] @db.ObjectId @unique
  creator     User     @relation(fields: [creatorId], name: "Creator",references: [id])
  creatorId   String   @db.ObjectId
  tasks       Task[]   @relation("ProjectTasks")
  


  @@map("projects")
}

model Task {
  id             String  @id @default(auto()) @map("_id") @db.ObjectId
  title          String
  status         String
  summary        String
  type           String
  priority       String
  dueDate        String
  startDate      String
  taskAssignee   User   @relation(fields: [taskAssigneeId], name: "Assignee",references: [id])
  taskAssigneeId String  @db.ObjectId
  project        Project @relation(fields: [projectId], name: "ProjectTasks",references: [id])
  projectId      String  @db.ObjectId

  @@map("tasks")
}
